"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{6305:function(e,t,r){r.d(t,{x1:function(){return s}});var a=r(9279);class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new AbortController,s=setTimeout(()=>n.abort(),this.timeout);try{let r="".concat(this.baseURL).concat(e),i=await fetch(r,{...t,signal:n.signal,headers:{"Content-Type":"application/json",...t.headers}});if(clearTimeout(s),!i.ok){let e=await i.json().catch(()=>({}));throw new a.MS(e.message||"HTTP ".concat(i.status),i.status,e)}let o=await i.json();if(!o.success)throw new a.MS(o.error||"API request failed");return o.data}catch(n){if(clearTimeout(s),"AbortError"===n.name){if(r<this.retries)return await this.sleep(this.retryDelay*(r+1)),this.request(e,t,r+1);throw new a.W5}if(n instanceof TypeError){if(r<this.retries)return await this.sleep(this.retryDelay*(r+1)),this.request(e,t,r+1);throw new a.F7}if(n instanceof a.MS&&n.statusCode&&n.statusCode>=500&&r<this.retries)return await this.sleep(this.retryDelay*(r+1)),this.request(e,t,r+1);throw n}}sleep(e){return new Promise(t=>setTimeout(t,e))}buildQueryString(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,a]=e;null!=a&&(Array.isArray(a)?a.forEach(e=>t.append(r,String(e))):t.append(r,String(a)))});let r=t.toString();return r?"?".concat(r):""}async get(e,t){let r=t?this.buildQueryString(t):"";return this.request("".concat(e).concat(r),{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async getTransactions(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.Hz.defaultPageSize;return this.get(a.Hz.endpoints.transactions,{...e,sortBy:t,sortOrder:r,page:n,pageSize:s})}async getTransaction(e){return this.get("".concat(a.Hz.endpoints.transactions,"/").concat(e))}async getStats(){return this.get(a.Hz.endpoints.stats)}async getUserStats(e){return this.get("".concat(a.Hz.endpoints.userStats,"?address=").concat(e))}async getUserTransactions(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Hz.defaultPageSize;return this.get(a.Hz.endpoints.userTransactions,{address:e,...t,page:r,pageSize:n})}async healthCheck(){return this.get(a.Hz.endpoints.health)}setAuthToken(e){sessionStorage.setItem("api_auth_token",e)}clearAuthToken(){sessionStorage.removeItem("api_auth_token")}getAuthToken(){return sessionStorage.getItem("api_auth_token")}constructor(){this.baseURL=a.Hz.baseURL,this.timeout=a.Hz.timeout,this.retries=a.Hz.retries,this.retryDelay=a.Hz.retryDelay}}let s=new n,{getTransactions:i,getTransaction:o,getStats:c,getUserStats:l,getUserTransactions:u,healthCheck:d}=s},9279:function(e,t,r){r.d(t,{F7:function(){return c},Hz:function(){return i},MS:function(){return o},W5:function(){return l}});var a,n,s=r(257);let i={baseURL:s.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",wsURL:s.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001",endpoints:{transactions:"/api/transactions",stats:"/api/stats",userStats:"/api/user/stats",userTransactions:"/api/user/transactions",health:"/api/health"},timeout:3e4,retries:3,retryDelay:1e3,ws:{reconnectInterval:5e3,maxReconnectAttempts:10,heartbeatInterval:3e4,messageTimeout:5e3},defaultPageSize:20,maxPageSize:100};(a=n||(n={})).SUBSCRIBE="subscribe",a.UNSUBSCRIBE="unsubscribe",a.PING="ping",a.PONG="pong",a.NEW_TRANSACTION="new_transaction",a.TRANSACTION_UPDATE="transaction_update",a.STATS_UPDATE="stats_update",a.ERROR="error";class o extends Error{constructor(e,t,r){super(e),this.statusCode=t,this.response=r,this.name="ApiError"}}class c extends Error{constructor(e="Network request failed"){super(e),this.name="NetworkError"}}class l extends Error{constructor(e="Request timeout"){super(e),this.name="TimeoutError"}}},1469:function(e,t,r){r.d(t,{Yh:function(){return c},lA:function(){return o},v7:function(){return i}});var a=r(2265);let n=e=>1-Math.pow(1-e,3);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{start:r=0,duration:s=2e3,decimals:i=0,prefix:o="",suffix:c="",separator:l=",",easing:u=n}=t,[d,h]=(0,a.useState)(r),w=(0,a.useRef)(),g=(0,a.useRef)();return(0,a.useEffect)(()=>{h(r),g.current=void 0;let t=a=>{g.current||(g.current=a);let n=Math.min((a-g.current)/s,1);h(r+(e-r)*u(n)),n<1&&(w.current=requestAnimationFrame(t))};return w.current=requestAnimationFrame(t),()=>{w.current&&cancelAnimationFrame(w.current)}},[e,r,s,u]),(e=>{let t=e.toFixed(i).split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,l),o+t.join(".")+c})(d)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return s(e,{prefix:t,decimals:r,separator:","})}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return s(e,{suffix:"%",decimals:t})}function c(e){return s(e,{decimals:0,separator:","})}},3583:function(e,t,r){r.d(t,{b:function(){return s}});var a=r(2265);let n={max:15,perspective:1e3,scale:1.05,speed:400,easing:"cubic-bezier(0.03, 0.98, 0.52, 0.99)",glare:!0,maxGlare:.3};function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useRef)(null),r={...n,...e};return(0,a.useEffect)(()=>{let e=t.current;if(!e)return;let a=!1,n=()=>{a=!0,e.style.transition="transform ".concat(r.speed,"ms ").concat(r.easing)},s=t=>{if(!a)return;let n=e.getBoundingClientRect(),s=n.left+n.width/2,i=n.top+n.height/2,o=t.clientX-s,c=t.clientY-i,l=(-c/(n.height/2)*r.max).toFixed(2),u=(o/(n.width/2)*r.max).toFixed(2);if(e.style.transform="\n        perspective(".concat(r.perspective,"px)\n        rotateX(").concat(l,"deg)\n        rotateY(").concat(u,"deg)\n        scale3d(").concat(r.scale,", ").concat(r.scale,", ").concat(r.scale,")\n      "),r.glare){let t=e.querySelector(".tilt-glare");if(t){let e=o/(n.width/2)*50+50,a=c/(n.height/2)*50+50;t.style.background="\n            radial-gradient(\n              circle at ".concat(e,"% ").concat(a,"%,\n              rgba(255, 255, 255, ").concat(r.maxGlare,") 0%,\n              transparent 60%\n            )\n          ")}}},i=()=>{if(a=!1,e.style.transition="transform ".concat(r.speed,"ms ").concat(r.easing),e.style.transform="\n        perspective(".concat(r.perspective,"px)\n        rotateX(0deg)\n        rotateY(0deg)\n        scale3d(1, 1, 1)\n      "),r.glare){let t=e.querySelector(".tilt-glare");t&&(t.style.background="transparent")}};if(e.addEventListener("mouseenter",n),e.addEventListener("mousemove",s),e.addEventListener("mouseleave",i),e.style.transformStyle="preserve-3d",r.glare){let t=document.createElement("div");t.className="tilt-glare",t.style.cssText="\n        position: absolute;\n        inset: 0;\n        pointer-events: none;\n        border-radius: inherit;\n        transition: background ".concat(r.speed,"ms ").concat(r.easing,";\n        z-index: 1;\n      "),e.style.position="relative",e.appendChild(t)}return()=>{if(e.removeEventListener("mouseenter",n),e.removeEventListener("mousemove",s),e.removeEventListener("mouseleave",i),r.glare){let t=e.querySelector(".tilt-glare");t&&e.removeChild(t)}}},[r]),t}},9840:function(e,t,r){r.d(t,{f:function(){return i}});var a=r(2265),n=r(4521),s=r(6305);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFetch:t=!0}=e,{address:r,isConnected:i}=(0,n.O)(),[o,c]=(0,a.useState)(null),[l,u]=(0,a.useState)([]),[d,h]=(0,a.useState)(!1),[w,g]=(0,a.useState)(null),[f,m]=(0,a.useState)(1),[p]=(0,a.useState)(20),[v,y]=(0,a.useState)(0),[E,C]=(0,a.useState)(!1),S=(0,a.useCallback)(async()=>{if(!r){g("Wallet not connected");return}try{h(!0),g(null);let e=await s.x1.getUserStats(r);c(e)}catch(e){g(e.message||"Failed to load statistics")}finally{h(!1)}},[r]),b=(0,a.useCallback)(async()=>{if(!r){g("Wallet not connected");return}try{h(!0),g(null);let e=await s.x1.getUserTransactions(r,{status:"all"},f,p);u(e.items),y(e.total),C(e.hasMore)}catch(e){g(e.message||"Failed to load transactions")}finally{h(!1)}},[r,f,p]),T=(0,a.useCallback)(async()=>{await Promise.all([S(),b()])},[S,b]),_=(0,a.useCallback)(()=>{E&&m(e=>e+1)},[E]),N=(0,a.useCallback)(()=>{f>1&&m(e=>e-1)},[f]);return(0,a.useEffect)(()=>{t&&r&&i&&T()},[r,i]),(0,a.useEffect)(()=>{t&&r&&i&&f>1&&b()},[f,t,r,i,b]),{stats:o,transactions:l,isLoading:d,error:w,page:f,pageSize:p,total:v,hasMore:E,fetchStats:S,fetchTransactions:b,nextPage:_,prevPage:N,refresh:T}}},4521:function(e,t,r){r.d(t,{O:function(){return c}});var a=r(2265),n=r(5029),s=r(7798),i=r(4708);let o={address:null,isConnected:!1,isConnecting:!1,chainId:null,isCorrectNetwork:!1,balance:{bnb:"0",plex:"0"},error:null};function c(){let[e,t]=(0,a.useState)(o),r=(0,a.useCallback)(async()=>{if(e.address)try{let[r,a]=await Promise.all([n.rv.getBalance(e.address),s.i.balanceOf(e.address)]);t(e=>({...e,balance:{bnb:r,plex:a}}))}catch(e){}},[e.address]),c=(0,a.useCallback)(async()=>{try{let e=await n.rv.getChainId(),r=e===i.eJ.chainId;return t(t=>({...t,chainId:e,isCorrectNetwork:r,error:r?null:i.sl.WRONG_NETWORK})),r}catch(e){return!1}},[]),l=(0,a.useCallback)(async()=>{t(e=>({...e,isConnecting:!0,error:null}));try{let e=await (0,n.UP)(),r=await c(),[a,o]=await Promise.all([n.rv.getBalance(e),s.i.balanceOf(e)]);localStorage.setItem(i.I.WALLET_ADDRESS,e),t({address:e,isConnected:!0,isConnecting:!1,chainId:await n.rv.getChainId(),isCorrectNetwork:r,balance:{bnb:a,plex:o},error:r?null:i.sl.WRONG_NETWORK})}catch(r){let e="Ошибка подключения кошелька";4001===r.code?e=i.sl.USER_REJECTED:r.message&&(e=r.message),t({...o,error:e})}},[c]),u=(0,a.useCallback)(async()=>{await (0,n.co)(),t(o)},[]),d=(0,a.useCallback)(async()=>{try{await n.rv.switchNetwork(),await c()}catch(r){let e="Ошибка переключения сети";4001===r.code&&(e=i.sl.USER_REJECTED),t(t=>({...t,error:e}))}},[c]),h=(0,a.useCallback)(async t=>{0===t.length?await u():t[0]!==e.address&&await l()},[e.address,l,u]),w=(0,a.useCallback)(()=>{window.location.reload()},[]);return(0,a.useEffect)(()=>{if(window.ethereum)return window.ethereum.on("accountsChanged",h),window.ethereum.on("chainChanged",w),()=>{window.ethereum&&(window.ethereum.removeListener("accountsChanged",h),window.ethereum.removeListener("chainChanged",w))}},[h,w]),(0,a.useEffect)(()=>{!localStorage.getItem(i.I.WALLET_ADDRESS)||e.isConnected||e.isConnecting||l()},[]),(0,a.useEffect)(()=>{if(!e.isConnected||!e.address)return;r();let t=setInterval(r,3e4);return()=>clearInterval(t)},[e.isConnected,e.address,r]),{...e,connect:l,disconnect:u,switchNetwork:d,refreshBalance:r}}},4708:function(e,t,r){r.d(t,{I:function(){return c},bH:function(){return n},eJ:function(){return i},sl:function(){return o}});var a,n,s=r(257);let i={chainId:56,chainName:"BNB Smart Chain",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{primary:s.env.NEXT_PUBLIC_BSC_RPC_URL||"https://bsc-dataseed.binance.org/",fallback:"https://bsc-dataseed1.defibit.io/",backup:"https://bsc-dataseed1.ninicoin.io/"},blockExplorerUrls:["https://bscscan.com"],contracts:{PLEX:s.env.NEXT_PUBLIC_PLEX_TOKEN_ADDRESS||"0x123...abc",AUTH:s.env.NEXT_PUBLIC_AUTH_ADDRESS||"0xdef...456"},requiredPlexAmount:"1",transactionTimeout:6e4,confirmations:3},o={NO_PROVIDER:"Web3 провайдер не найден. Установите MetaMask или другой кошелёк.",WRONG_NETWORK:"Неверная сеть. Переключитесь на BNB Smart Chain (BSC).",INSUFFICIENT_PLEX:"Недостаточно PLEX токенов. Требуется минимум 1 PLEX.",USER_REJECTED:"Вы отклонили запрос.",TRANSACTION_FAILED:"Транзакция не удалась.",ALREADY_CONNECTED:"Кошелёк уже подключен.",NOT_CONNECTED:"Кошелёк не подключен."};(a=n||(n={})).IDLE="idle",a.PENDING="pending",a.SUCCESS="success",a.FAILED="failed";let c={WALLET_ADDRESS:"arbitrobot_wallet_address",AUTH_TOKEN:"arbitrobot_auth_token",AUTH_EXPIRY:"arbitrobot_auth_expiry"}},7798:function(e,t,r){r.d(t,{i:function(){return l}});var a=r(5810),n=r(1662),s=r(5029),i=r(4708);let o=["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)","function totalSupply() view returns (uint256)","function allowance(address owner, address spender) view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","function approve(address spender, uint256 amount) returns (bool)","event Transfer(address indexed from, address indexed to, uint256 value)","event Approval(address indexed owner, address indexed spender, uint256 value)"];class c{async getContract(){if(this.contract)return this.contract;let e=await s.rv.getProvider();return this.contract=new a.CH(this.address,o,e),this.contract}async getContractWithSigner(){let e=await s.rv.getSigner();return new a.CH(this.address,o,e)}async getName(){let e=await this.getContract();return await e.name()}async getSymbol(){let e=await this.getContract();return await e.symbol()}async getDecimals(){let e=await this.getContract();return await e.decimals()}async getTotalSupply(){let e=await this.getContract(),t=await this.getDecimals(),r=await e.totalSupply();return n.bM(r,t)}async balanceOf(e){let t=await this.getContract(),r=await this.getDecimals(),a=await t.balanceOf(e);return n.bM(a,r)}async hasRequiredBalance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.eJ.requiredPlexAmount;return parseFloat(await this.balanceOf(e))>=parseFloat(t)}async allowance(e,t){let r=await this.getContract(),a=await this.getDecimals(),s=await r.allowance(e,t);return n.bM(s,a)}async approve(e,t){let r=await this.getContractWithSigner(),a=await this.getDecimals(),s=n.vz(t,a),i=await r.approve(e,s);return await i.wait(),i.hash}async transfer(e,t){let r=await this.getContractWithSigner(),a=await this.getDecimals(),s=n.vz(t,a),i=await r.transfer(e,s);return await i.wait(),i.hash}async sendVerificationTransaction(){let e=i.eJ.contracts.AUTH,t=i.eJ.requiredPlexAmount;return await this.transfer(e,t)}async verifyTransaction(e){try{let t=await s.rv.waitForTransaction(e);if(!t||1!==t.status)return!1;let r=await this.getContract();for(let e of t.logs)try{let t=r.interface.parseLog({topics:e.topics,data:e.data});if(t&&"Transfer"===t.name){let e=t.args[1].toLowerCase(),r=i.eJ.contracts.AUTH.toLowerCase();if(e===r)return!0}}catch(e){continue}return!1}catch(e){return!1}}constructor(e){this.contract=null,this.address=e||i.eJ.contracts.PLEX}}let l=new c},5029:function(e,t,r){r.d(t,{UP:function(){return c},co:function(){return l},rv:function(){return o}});var a=r(288),n=r(1662),s=r(4708);class i{async getProvider(){if(this.provider)return this.provider;if(!window.ethereum)throw Error(s.sl.NO_PROVIDER);return this.provider=new a.Q(window.ethereum),this.provider}async getSigner(){if(this.signer)return this.signer;let e=await this.getProvider();return this.signer=await e.getSigner(),this.signer}async getAddress(){let e=await this.getSigner();return await e.getAddress()}async getChainId(){let e=await this.getProvider();return Number((await e.getNetwork()).chainId)}async isCorrectNetwork(){try{return await this.getChainId()===s.eJ.chainId}catch(e){return!1}}async switchNetwork(){if(!window.ethereum)throw Error(s.sl.NO_PROVIDER);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x".concat(s.eJ.chainId.toString(16))}]})}catch(e){if(4902===e.code)await this.addNetwork();else throw e}}async addNetwork(){if(!window.ethereum)throw Error(s.sl.NO_PROVIDER);await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x".concat(s.eJ.chainId.toString(16)),chainName:s.eJ.chainName,nativeCurrency:s.eJ.nativeCurrency,rpcUrls:[s.eJ.rpcUrls.primary],blockExplorerUrls:s.eJ.blockExplorerUrls}]})}async getBalance(e){let t=await this.getProvider(),r=await t.getBalance(e);return n.dF(r)}async waitForTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.eJ.confirmations,r=await this.getProvider();return await r.waitForTransaction(e,t)}reset(){this.provider=null,this.signer=null}constructor(){this.provider=null,this.signer=null}}let o=new i;async function c(){if(!window.ethereum)throw Error(s.sl.NO_PROVIDER);let e=await window.ethereum.request({method:"eth_requestAccounts"});if(!e||0===e.length)throw Error(s.sl.USER_REJECTED);return e[0]}async function l(){o.reset(),localStorage.removeItem("walletAddress"),localStorage.removeItem("walletConnected")}}}]);